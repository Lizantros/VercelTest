{"ast":null,"code":"// ProtectedRoute.js\nimport React from\"react\";import{Navigate}from\"react-router-dom\";import{jwtDecode}from\"jwt-decode\";// Use destructuring to import the named export\nimport{jsx as _jsx}from\"react/jsx-runtime\";var ProtectedRoute=function ProtectedRoute(_ref){var children=_ref.children;var token=localStorage.getItem(\"token\");// Retrieve the JWT token from local storage\nvar isAuthenticated=false;if(token){try{var decodedToken=jwtDecode(token);// Use the named export here\nvar currentTime=Date.now()/1000;if(decodedToken.exp>currentTime){isAuthenticated=true;}}catch(e){isAuthenticated=false;}}return isAuthenticated?children:/*#__PURE__*/_jsx(Navigate,{to:\"/\"});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","jwtDecode","jsx","_jsx","ProtectedRoute","_ref","children","token","localStorage","getItem","isAuthenticated","decodedToken","currentTime","Date","now","exp","e","to"],"sources":["/Users/loicpeyramaure/Gw2 Talk/Gw2-Talk/frontend/src/ProtectedRoute.js"],"sourcesContent":["// ProtectedRoute.js\nimport React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { jwtDecode } from \"jwt-decode\"; // Use destructuring to import the named export\n\nconst ProtectedRoute = ({ children }) => {\n  const token = localStorage.getItem(\"token\"); // Retrieve the JWT token from local storage\n  let isAuthenticated = false;\n\n  if (token) {\n    try {\n      const decodedToken = jwtDecode(token); // Use the named export here\n      const currentTime = Date.now() / 1000;\n      if (decodedToken.exp > currentTime) {\n        isAuthenticated = true;\n      }\n    } catch (e) {\n      isAuthenticated = false;\n    }\n  }\n\n  return isAuthenticated ? children : <Navigate to=\"/\" />;\n};\n\nexport default ProtectedRoute;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,SAAS,KAAQ,YAAY,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAExC,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAChC,GAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE;AAC7C,GAAI,CAAAC,eAAe,CAAG,KAAK,CAE3B,GAAIH,KAAK,CAAE,CACT,GAAI,CACF,GAAM,CAAAI,YAAY,CAAGV,SAAS,CAACM,KAAK,CAAC,CAAE;AACvC,GAAM,CAAAK,WAAW,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CACrC,GAAIH,YAAY,CAACI,GAAG,CAAGH,WAAW,CAAE,CAClCF,eAAe,CAAG,IAAI,CACxB,CACF,CAAE,MAAOM,CAAC,CAAE,CACVN,eAAe,CAAG,KAAK,CACzB,CACF,CAEA,MAAO,CAAAA,eAAe,CAAGJ,QAAQ,cAAGH,IAAA,CAACH,QAAQ,EAACiB,EAAE,CAAC,GAAG,CAAE,CAAC,CACzD,CAAC,CAED,cAAe,CAAAb,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}