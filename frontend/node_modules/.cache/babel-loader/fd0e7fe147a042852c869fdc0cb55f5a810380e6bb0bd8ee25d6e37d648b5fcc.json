{"ast":null,"code":"import _objectSpread from\"/Users/loicpeyramaure/Gw2 Talk/Gw2-Talk/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/loicpeyramaure/Gw2 Talk/Gw2-Talk/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/loicpeyramaure/Gw2 Talk/Gw2-Talk/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/loicpeyramaure/Gw2 Talk/Gw2-Talk/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import logo from\"./images/logo.svg\";// Ensure this path is correct\nimport{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreatePost(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();// Check for title length\nif(!(title.length>50)){_context.next=4;break;}setError('Title is too long. Maximum length is 50 characters.');return _context.abrupt(\"return\");case 4:if(!(!title.trim()||!content.trim())){_context.next=7;break;}setError('Title and content cannot be empty.');return _context.abrupt(\"return\");case 7:setError('');setSuccess('');token=localStorage.getItem('token');if(token){_context.next=13;break;}setError('No authentication token found. Please login.');return _context.abrupt(\"return\");case 13:_context.prev=13;_context.next=16;return axios.post('https://gw2test-5b5b5deabf74.herokuapp.com/create-post',{title:title,content:content},{headers:{'Authorization':\"Bearer \".concat(token)}});case 16:setSuccess('Post created successfully');navigate('/forum');_context.next=24;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](13);console.error('Error creating post:',_context.t0);setError('Error creating post. Please try again.');case 24:case\"end\":return _context.stop();}},_callee,null,[[13,20]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleCancel=function handleCancel(){navigate('/forum');};var formStyle={display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'80vh',// Adjust the height as needed\ngap:'20px'// Space between elements\n};var inputStyle={border:'1px solid red',borderRadius:'15px',// More rounded corners\nwidth:'300px',// Fixed width for both title and content fields\npadding:'10px',margin:'10px 0'// Margin for spacing\n};var buttonStyle={marginTop:'10px',backgroundColor:'red',color:'white',borderRadius:'15px',padding:'10px 20px',border:'none',cursor:'pointer'};return/*#__PURE__*/_jsxs(\"div\",{style:formStyle,children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Logo\",style:{maxWidth:'150px',marginBottom:'20px'}}),/*#__PURE__*/_jsx(\"h2\",{children:\"Create a Post\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),success&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:success}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{width:'100%',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);},style:inputStyle,maxLength:50// Set the maximum length for the title input\n}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",value:content,onChange:function onChange(e){return setContent(e.target.value);},style:_objectSpread(_objectSpread({},inputStyle),{},{height:'100px'})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:buttonStyle,children:\"Cr\\xE9er\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleCancel,style:{marginTop:'10px',color:'red',cursor:'pointer'},children:\"Annuler\"})]})]});}export default CreatePost;","map":{"version":3,"names":["React","useState","axios","logo","useNavigate","jsx","_jsx","jsxs","_jsxs","CreatePost","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","content","setContent","_useState5","_useState6","error","setError","_useState7","_useState8","success","setSuccess","navigate","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","token","wrap","_callee$","_context","prev","next","preventDefault","length","abrupt","trim","localStorage","getItem","post","headers","concat","t0","console","stop","_x","apply","arguments","handleCancel","formStyle","display","flexDirection","alignItems","justifyContent","height","gap","inputStyle","border","borderRadius","width","padding","margin","buttonStyle","marginTop","backgroundColor","color","cursor","style","children","src","alt","maxWidth","marginBottom","onSubmit","type","id","value","onChange","target","maxLength","_objectSpread","onClick"],"sources":["/Users/loicpeyramaure/Gw2 Talk/Gw2-Talk/frontend/src/CreatePost.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport logo from \"./images/logo.svg\"; // Ensure this path is correct\nimport { useNavigate } from 'react-router-dom';\n\nfunction CreatePost() {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Check for title length\n    if (title.length > 50) {\n        setError('Title is too long. Maximum length is 50 characters.');\n        return;\n    }\n\n    if (!title.trim() || !content.trim()) {\n        setError('Title and content cannot be empty.');\n        return;\n    }\n\n    setError('');\n    setSuccess('');\n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setError('No authentication token found. Please login.');\n      return;\n    }\n\n    try {\n      await axios.post('https://gw2test-5b5b5deabf74.herokuapp.com/create-post', { title, content }, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      setSuccess('Post created successfully');\n      navigate('/forum');\n    } catch (error) {\n      console.error('Error creating post:', error);\n      setError('Error creating post. Please try again.');\n    }\n  };\n\n  const handleCancel = () => {\n    navigate('/forum');\n  };\n\n  const formStyle = {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '80vh', // Adjust the height as needed\n    gap: '20px', // Space between elements\n  };\n\n  const inputStyle = {\n    border: '1px solid red',\n    borderRadius: '15px', // More rounded corners\n    width: '300px', // Fixed width for both title and content fields\n    padding: '10px',\n    margin: '10px 0', // Margin for spacing\n  };\n\n  const buttonStyle = {\n    marginTop: '10px',\n    backgroundColor: 'red',\n    color: 'white',\n    borderRadius: '15px',\n    padding: '10px 20px',\n    border: 'none',\n    cursor: 'pointer',\n  };\n\n  return (\n    <div style={formStyle}>\n        <img src={logo} alt='Logo' style={{ maxWidth: '150px', marginBottom: '20px' }} />\n        <h2>Create a Post</h2>\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n        {success && <p style={{ color: 'green' }}>{success}</p>}\n        <form onSubmit={handleSubmit} style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n            <input\n                type=\"text\"\n                id=\"title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                style={inputStyle}\n                maxLength={50}  // Set the maximum length for the title input\n            />\n            <textarea\n                id=\"content\"\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                style={{...inputStyle, height: '100px'}}\n            />\n            <button type=\"submit\" style={buttonStyle}>Cr√©er</button>\n            <p onClick={handleCancel} style={{marginTop: '10px', color: 'red', cursor: 'pointer' }}>Annuler</p>\n        </form>\n    </div>\n);\n}\n\nexport default CreatePost;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}